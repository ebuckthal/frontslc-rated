!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.way=b()}(this,function(){"use strict";var a,b,c="way",d=function(){this._watchers={},this._watchersAll={}};d.prototype.constructor=d,d.prototype.watchAll=function(a){this._watchersAll=this._watchersAll||[],m.contains(this._watchersAll,a)||this._watchersAll.push(a)},d.prototype.watch=function(a,b){this._watchers||(this._watchers={}),this._watchers[a]=this._watchers[a]||[],this._watchers[a].push(b)},d.prototype.findWatcherDeps=function(a){var b=[],c=m.keys(this._watchers);return c.forEach(function(c){f(a,c)&&b.push(c)}),b},d.prototype.emitChange=function(a){this._watchers||(this._watchers={});var b=this,c=b.findWatcherDeps(a);c.forEach(function(a){this._watchers[a]&&this._watchers[a].forEach(function(c){c.apply(b,[b.get(a)])})}),b._watchersAll&&m.isArray(b._watchersAll)&&b._watchersAll.forEach(function(c){m.isFunction(c)&&c.apply(b,[a,b.get(a)])})};var e=function(){this.data={},this._bindings={},this.options={persistent:!0,timeoutInput:50,timeoutDOM:500}};e.prototype=Object.create(d.prototype),e.constructor=e,e.prototype.dom=function(a){return this._element=b.dom(a).get(0),this},e.prototype.toStorage=function(a,b){var c=this,b=b||c._element,a=a||c.dom(b).getOptions(),d=c.dom(b).toJSON(a),e=c.dom(b).scope(),f=e?e+"."+a.data:a.data;return a.readonly?!1:void c.set(f,d,a)},e.prototype.toJSON=function(a,b){var c=this,b=b||c._element,d=c.dom(b).getValue(),a=a||c.dom(b).getOptions();return m.isArray(a.pick)&&(d=j(d,a.pick,!0)),m.isArray(a.omit)&&(d=j(d,a.omit,!1)),d},e.prototype.fromStorage=function(a,b){var c=this,b=b||c._element,a=a||c.dom(b).getOptions();if(a.writeonly)return!1;var d=c.dom(b).scope(),e=d?d+"."+a.data:a.data,f=c.get(e);c.dom(b).fromJSON(f,a)},e.prototype.fromJSON=function(a,b,c){var d=this,c=c||d._element,b=b||d.dom(c).getOptions();if(b.writeonly)return!1;if(m.isObject(a)){m.isArray(b.pick)&&(a=j(a,b.pick,!0)),m.isArray(b.omit)&&(a=j(a,b.omit,!1));var e=m.isObject(d.dom(c).toJSON())?d.dom(c).toJSON():{};a=m.extend(e,a)}b.json&&(a=z.isStringified(a)?a:z.prettyprint(a)),d.dom(c).setValue(a,b)},e.prototype.getValue=function(a){var c=this,a=a||c._element,d={SELECT:function(){return b.dom(a).val()},INPUT:function(){var c=b.dom(a).type();return m.contains(["text","password"],c)?b.dom(a).val():m.contains(["checkbox","radio"],c)?b.dom(a).prop("checked")?b.dom(a).val():null:void 0},TEXTAREA:function(){return b.dom(a).val()}},e=function(){b.dom(a).html()},f=b.dom(a).get(0).tagName,g=d[f]||e;return g()},e.prototype._filters={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},reverse:function(a){return a.split("").reverse().join("")}},e.prototype.registerFilter=function(a,b){var c=this;m.isFunction(b)&&(c._filters[a]=b)},e.prototype.setValue=function(a,c,d){var e=this,d=d||e._element,c=c||e.dom(d).getOptions();c.filter=c.filter||[],c.filter.forEach(function(b){var c=e._filters[b]||function(a){return a};a=c(a)});var f={SELECT:function(a){b.dom(d).val(a)},INPUT:function(a){m.isString(a)||(a=JSON.stringify(a));var c=b.dom(d).get(0).type;m.contains(["text","password"],c)&&b.dom(d).val(a||""),m.contains(["checkbox","radio"],c)&&(a===b.dom(d).val()?b.dom(d).prop("checked",!0):b.dom(d).prop("checked",!1))},TEXTAREA:function(a){m.isString(a)||(a=JSON.stringify(a)),b.dom(d).val(a||"")},PRE:function(a){c.html?b.dom(d).html(a):b.dom(d).text(a)},IMG:function(a){if(!a)return a=c.default||"",b.dom(d).attr("src",a),!1;var e=function(a,c){b.dom(d).addClass("way-loading"),b.dom("img",{src:a,onerror:function(){c(!1)},onload:function(){c(!0)}})};e(a,function(e){b.dom(d).removeClass("way-loading"),e?b.dom(d).removeClass("way-error").addClass("way-success"):(a?b.dom(d).addClass("way-error"):b.dom(d).removeClass("way-error").removeClass("way-success"),a=c.default||""),b.dom(d).attr("src",a)})}},g=function(a){c.html?b.dom(d).html(a):b.dom(d).text(a)},h=b.dom(d).get(0).tagName,i=f[h]||g;i(a)},e.prototype.setDefault=function(a,b,c){var d=this,c=c||d._element,a=a||!1,b=b?m.extend(d.dom(c).getOptions(),b):d.dom(c).getOptions();return b.default?void(a?d.set(b.data,b.default,b):d.dom(c).setValue(b.default,b)):!1},e.prototype.setDefaults=function(){var a=this,d="["+c+"-default]",e=b.dom(d).get();for(var f in e){var g=e[f],h=a.dom(g).getOptions(),i=h.data||null,j=i?a.get(i):null;j||a.dom(g).setDefault()}},e.prototype.registerBindings=function(){var a=this,d="["+c+"-data]";a._bindings={};var e=b.dom(d).get();for(var f in e){var g=e[f],h=a.dom(g).getOptions(),i=a.dom(g).scope(),d=i?i+"."+h.data:h.data;a._bindings[d]=a._bindings[d]||[],m.contains(a._bindings[d],b.dom(g).get(0))||a._bindings[d].push(b.dom(g).get(0))}},e.prototype.updateBindings=function(a){var c=this;c._bindings=c._bindings||{};var d=k(c._bindings,a);d.forEach(function(a){var d=b.dom(a).get(0)===b.dom(":focus").get(0)?!0:!1;d||c.dom(a).fromStorage()}),c._bindings.__all__&&c._bindings.__all__.forEach(function(a){c.dom(a).fromJSON(c.data)})},e.prototype.registerRepeats=function(){var a=this,d="["+c+"-repeat]";a._repeats=a._repeats||{},a._repeatsCount=a._repeatsCount||0;var e=b.dom(d).get();for(var f in e){var g=e[f],h=a.dom(g).getOptions();a._repeats[h.repeat]=a._repeats[h.repeat]||[];var i=c+'-repeat-wrapper="'+a._repeatsCount+'"',j=b.dom(g).parent("["+i+"]");if(!j.length){a._repeats[h.repeat].push({id:a._repeatsCount,element:b.dom(g).clone(!0).removeAttr(c+"-repeat").get(0),selector:h.repeat});var k=document.createElement("div");b.dom(k).attr(c+"-repeat-wrapper",a._repeatsCount),b.dom(k).attr(c+"-scope",h.repeat),b.dom(g).replaceWith(k),a.updateRepeats(h.repeat),a._repeatsCount++}}},e.prototype.updateRepeats=function(a){var d=this;d._repeats=d._repeats||{};var e=k(d._repeats,a);e.forEach(function(a){var e="["+c+'-repeat-wrapper="'+a.id+'"]',f=d.get(a.selector),g=[];b.dom(e).empty();for(var h in f){b.dom(a.element).attr(c+"-scope",h);var i=b.dom(a.element).get(0).outerHTML;i=i.replace(/\$\$key/gi,h),g.push(i)}b.dom(e).html(g),d.registerBindings(),d.updateBindings()})},e.prototype.updateForms=function(){var a=this,d="form["+c+"-data]",e=b.dom(d).get();for(var f in e){var h=e[f],i=a.dom(h).getOptions(),j=i.data;b.dom(h).removeAttr(c+"-data");var k=b.dom(h).find("[name]").reverse().get();for(var f in k){var l=k[f],m=b.dom(l).attr("name");if(g(m,"[]")){var n=m.split("[]")[0],o="[name^='"+n+"']",p=b.dom(h).find(o).get().length;m=n+"."+p}var d=j+"."+m;i.data=d,a.dom(l).setOptions(i),b.dom(l).removeAttr("name")}}},e.prototype.registerDependencies=function(){this.registerBindings(),this.registerRepeats()},e.prototype.updateDependencies=function(a){this.updateBindings(a),this.updateRepeats(a),this.updateForms(a)},e.prototype.setOptions=function(a,d){var e=this,d=e._element||d;for(var f in a){var g=c+"-"+f,h=a[f];b.dom(d).attr(g,h)}},e.prototype.getOptions=function(a){var b=this,a=a||b._element,d={data:null,html:!1,readonly:!1,writeonly:!1,persistent:!1};return m.extend(d,b.dom(a).getAttrs(c))},e.prototype.getAttrs=function(a,c){var d=this,c=c||d._element,e=function(a,b){var c={pick:"array",omit:"array",readonly:"boolean",writeonly:"boolean",json:"boolean",html:"boolean",persistent:"boolean"},d={array:function(a){return a.split(",")},"boolean":function(a){return"true"===a?!0:"false"===a?!1:!0}},e=function(){return b},f=c[a]||null,g=d[f]||e;return g(b)},g={},h=[].slice.call(b.dom(c).get(0).attributes);return h.forEach(function(b){var c=a&&f(b.name,a+"-")?!0:!1;if(c){var d=a?b.name.slice(a.length+1,b.name.length):b.name,h=e(d,b.value);"filter"===d&&(h=h.split("|")),g[d]=h}}),g},e.prototype.scope=function(a,d){var e=this,d=d||e._element,f=c+"-scope",g=c+"-scope-break",h=[],i="",j="["+g+"], ["+f+"]",k=b.dom(d).parents(j).get();for(var l in k){var n=k[l];if(b.dom(n).attr(g))break;var o=b.dom(n).attr(f);h.unshift(o)}return b.dom(d).attr(f)&&h.push(b.dom(d).attr(f)),b.dom(d).attr(g)&&(h=[]),i=m.compact(h).join(".")},e.prototype.get=function(a){var b=this;return void 0===a||m.isString(a)?b.data?a?z.get(b.data,a):b.data:{}:!1},e.prototype.set=function(a,b,c){if(!a)return!1;if("this"===a.split(".")[0])return console.log('Sorry, "this" is a reserved word in way.js'),!1;var d=this;if(c=c||{},a){if(!m.isString(a))return!1;d.data=d.data||{},d.data=a?z.set(d.data,a,b):{},d.updateDependencies(a),d.emitChange(a,b),c.persistent&&d.backup(a)}},e.prototype.push=function(a,b,c){if(!a)return!1;var d=this;c=c||{},a&&(d.data=a?z.push(d.data,a,b,!0):{}),d.updateDependencies(a),d.emitChange(a,null),c.persistent&&d.backup(a)},e.prototype.remove=function(a,b){var c=this;b=b||{},c.data=a?z.remove(c.data,a):{},c.updateDependencies(a),c.emitChange(a,null),b.persistent&&c.backup(a)},e.prototype.clear=function(){this.remove(null,{persistent:!0})},e.prototype.backup=function(){var a=this;if(a.options.persistent)try{var b=a.data||{};localStorage.setItem(c,JSON.stringify(b))}catch(d){console.log("Your browser does not support localStorage.")}},e.prototype.restore=function(){var a=this;if(a.options.persistent)try{var b=localStorage.getItem(c);try{b=JSON.parse(b);for(var d in b)a.set(d,b[d])}catch(e){}}catch(e){console.log("Your browser does not support localStorage.")}};var f=function(a,b){return""===b?!0:null===a||null===b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)},g=function(a,b){return""===b?!0:null===a||null===b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(a.length-b.length,a.length)===b)},h=function(a){return m.pick(a,m.compact(m.keys(a)))},i=function(a,b,c){var d=m.keys(a);return d.forEach(function(d){c?f(d,b)||delete a[d]:f(d,b)&&delete a[d]}),a},j=function(a,b,c){var d=z.flatten(a);for(var e in b)d=i(d,b[e],c);var f=z.unflatten(d);return h(f)},k=function(a,b){var c=[];if(b){var d=b.split("."),e=d[d.length-1],g=!isNaN(e);if(g){d.pop();var h=d.join(".");c=a[h]?m.union(c,a[h]):c}for(var h in a)f(h,b)&&(c=m.union(c,a[h]))}else for(var h in a)c=m.union(c,a[h]);return c},l=function(a){return a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},m={},n=Array.prototype,o=Object.prototype,p=Function.prototype,q=(Array.isArray,Object.keys),r=(p.bind,n.push),s=n.slice,t=n.concat,u=o.toString,v=o.hasOwnProperty,w=function(a,b,c,d){if(b&&m.every(a,m.isArray))return t.apply(d,a);for(var e=0,f=a.length;f>e;e++){var g=a[e];m.isArray(g)||m.isArguments(g)?b?r.apply(d,g):w(g,b,c,d):c||d.push(g)}return d},x=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};m.compact=function(a){return m.filter(a,m.identity)},m.filter=function(a,b,c){var d=[];return null==a?d:(b=m.iteratee(b,c),m.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},m.identity=function(a){return a},m.every=function(a,b,c){if(null==a)return!0;b=m.iteratee(b,c);var d,e,f=a.length!==+a.length&&m.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},m.union=function(){return m.uniq(w(arguments,!0,!0,[]))},m.uniq=function(a,b,c,d){if(null==a)return[];m.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=m.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);m.indexOf(f,j)<0&&(f.push(j),e.push(i))}else m.indexOf(e,i)<0&&e.push(i)}return e},m.pick=function(a,b,c){var d,e={};if(null==a)return e;if(m.isFunction(b)){b=x(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=t.apply([],s.call(arguments,1));a=new Object(a);for(var h=0,i=g.length;i>h;h++)d=g[h],d in a&&(e[d]=a[d])}return e},m.has=function(a,b){return null!=a&&v.call(a,b)},m.keys=function(a){if(!m.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)m.has(a,c)&&b.push(c);return b},m.contains=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=m.values(a)),m.indexOf(a,b)>=0)},m.sortedIndex=function(a,b,c,d){c=m.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},m.property=function(a){return function(b){return b[a]}},m.iteratee=function(a,b,c){return null==a?m.identity:m.isFunction(a)?x(a,b,c):m.isObject(a)?m.matches(a):m.property(a)},m.pairs=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},m.matches=function(a){var b=m.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},m.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=m.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},m.values=function(a){for(var b=m.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},m.extend=function(a){if(!m.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)v.call(b,c)&&(a[c]=b[c])}return a},m.isArray=function(a){return"[object Array]"===u.call(a)},m.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===u.call(a)},m.isUndefined=function(a){return void 0===a},m.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},m.each=function(a,b,c){if(null==a)return a;b=x(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=m.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},m.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){m["is"+a]=function(b){return u.call(b)==="[object "+a+"]"}});var y=function(a,b,c,d){var e,f=b.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),g=0,h=f.length;if(arguments.length>2){for(e=a,h--;h>g;)b=f[g++],a=a[b]=m.isObject(a[b])?a[b]:{};d?m.isArray(a)?a.splice(f[g],1):delete a[f[g]]:a[f[g]]=c,c=e}else{for(;null!=(a=a[f[g++]])&&h>g;);c=h>g?void 0:a}return c},z={};z.VERSION="0.1.0",z.debug=!0,z.exit=function(a,b,c,d){if(z.debug){var e={};e.noJSON="Not a JSON",e.noString="Not a String",e.noArray="Not an Array",e.missing="Missing argument";var f={source:a,data:c,value:d};f.message=e[b]?e[b]:"No particular reason",console.log("Error",f)}},z.is=function(a){return"[object Object]"==u.call(a)},z.isStringified=function(a){var b=!1;try{b=/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}catch(c){}return b},z.get=function(a,b){return void 0==a?z.exit("get","missing","json",a):void 0==b?z.exit("get","missing","selector",b):m.isString(b)?y(a,b):z.exit("get","noString","selector",b)},z.set=function(a,b,c){return void 0==a?z.exit("set","missing","json",a):void 0==b?z.exit("set","missing","selector",b):m.isString(b)?c?y(a,b,c):z.remove(a,b):z.exit("set","noString","selector",b)},z.remove=function(a,b){return void 0==a?z.exit("remove","missing","json",a):void 0==b?z.exit("remove","missing","selector",b):m.isString(b)?y(a,b,null,!0):z.exit("remove","noString","selector",b)},z.push=function(a,b,c,d){if(void 0==a)return z.exit("push","missing","json",a);if(void 0==b)return z.exit("push","missing","selector",b);var e=z.get(a,b);if(!m.isArray(e)){if(!d)return z.exit("push","noArray","array",e);e=[]}return e.push(c),z.set(a,b,e)},z.unshift=function(a,b,c){if(void 0==a)return z.exit("unshift","missing","json",a);if(void 0==b)return z.exit("unshift","missing","selector",b);if(void 0==c)return z.exit("unshift","missing","value",c);var d=z.get(a,b);return m.isArray(d)?(d.unshift(c),z.set(a,b,d)):z.exit("unshift","noArray","array",d)},z.flatten=function(a){function b(a,d){if(Object(a)!==a)c[d]=a;else if(Array.isArray(a))for(var e=0,f=a.length;f>e;e++)b(a[e],d?d+"."+e:""+e),0==f&&(c[d]=[]);else{var g=!0;for(var h in a)g=!1,b(a[h],d?d+"."+h:h);g&&(c[d]={})}}if("Object"!=a.constructor.name)return z.exit("flatten","noJSON","json",a);var c={};return b(a,""),c},z.unflatten=function(a){if(Object(a)!==a||Array.isArray(a))return a;var b,c,d,e,f,g={};for(var h in a){b=g,c="",e=0;do d=h.indexOf(".",e),f=h.substring(e,-1!==d?d:void 0),b=b[c]||(b[c]=isNaN(parseInt(f))?{}:[]),c=f,e=d+1;while(d>=0);b[c]=a[h]}return g[""]},z.prettyprint=function(a){return JSON.stringify(a,void 0,2)};var A=function(){};A.constructor=A,A.prototype.dom=function(a,b){var c=this,d=[];if(!b)return m.isString(a)?d=[].slice.call(document.querySelectorAll(a)):m.isObject(a)&&a.attributes&&(d=[a]),c._elements=d,c.length=d.length,c;var e=document.createElement(a);for(var f in b)e[f]=b[f]},A.prototype.on=function(a,b){var c=this,d=c._elements;a=a.split(" ");for(var e=0,f=d.length;f>e;e++)for(var g=d[e],h=0,i=a.length;i>h;h++)g.addEventListener&&g.addEventListener(a[h],b,!1)},A.prototype.find=function(a){var b=this,c=b.get(0),d=[];return m.isString(a)&&(d=[].slice.call(c.querySelectorAll(a))),b._elements=d,b},A.prototype.get=function(a,b){var c=this,d=c._elements||[],e=d[a]||{};return b?(c._element=e,c):m.isNumber(a)?e:d},A.prototype.reverse=function(){return this._elements=this._elements.reverse(),this},A.prototype.val=function(a){return this.prop("value",a)},A.prototype.type=function(a){return this.prop("type",a)},A.prototype.html=function(a){return this.prop("innerHTML",a)},A.prototype.text=function(a){return this.prop("innerHTML",l(a))},A.prototype.prop=function(a,b){var c=this,d=c._elements;for(var e in d){if(m.isUndefined(b))return d[e][a];d[e][a]=b}},A.prototype.attr=function(a,b){var c=this,d=c._elements;for(var e in d){if(void 0===b)return d[e].getAttribute(a);d[e].setAttribute(a,b)}return c},A.prototype.removeAttr=function(a){var b=this;for(var c in b._elements)b._elements[c].removeAttribute(a);return b},A.prototype.addClass=function(a){var b=this;for(var c in b._elements)b._elements[c].classList.add(a);return b},A.prototype.removeClass=function(a){var b=this;for(var c in b._elements)b._elements[c].classList.remove(a);return b},A.prototype.parents=function(a){for(var b=this,c=b.get(0),d=c.parentNode,e=[];null!==d;){var f=d,g=a&&f.matchesSelector?f.matchesSelector(a):!0,h=void 0!==f.doctype?!0:!1;g&&!h&&e.push(f),d=f.parentNode}return b._elements=e,b},A.prototype.parent=function(a){var b=this,c=b.get(0),d=c.parentNode,e=a&&d.matchesSelector?d.matchesSelector(a):!0;return e?d:{}},A.prototype.clone=function(a){var b=this,c=b.get(0),d=c.cloneNode(!0);return b._elements=[d],a?b:d},A.prototype.empty=function(a){var b=this,c=b.get(0);if(!c||!c.hasChildNodes)return a?b:c;for(;c.hasChildNodes();)c.removeChild(c.lastChild);return a?b:c},A.prototype.replaceWith=function(a){var b=this,c=b.get(0),d=c.parentNode;d.replaceChild(a,c)},A.prototype.ready=function(a){document.onreadystatechange=function(){"complete"===document.readyState&&a()}},a=new e;var B=null,C=function(c){B&&clearTimeout(B),B=setTimeout(function(){var d=b.dom(c.target).get(0);a.dom(d).toStorage()},a.options.timeout)},D=function(b){b.preventDefault();var c=a.dom(this).getOptions();a.remove(c.data,c)},E=function(b){b.preventDefault();var c=a.dom(this).getOptions();if(!c||!c["action-push"])return!1;var d=c["action-push"].split(":"),e=d[0]||null,f=d[1]||null;a.push(e,f,c)},F=function(b){b.preventDefault();var c=a.dom(this).getOptions();return c&&c["action-remove"]?void a.remove(c["action-remove"],c):!1},G=null,H=function(){G&&clearTimeout(G),G=setTimeout(function(){a.registerDependencies(),I()},a.options.timeoutDOM)};b=new A;var I=function(){b.dom("body").on("DOMSubtreeModified",H),b.dom("["+c+"-data]").on("input change",C),b.dom("["+c+"-clear]").on("click",D),b.dom("["+c+"-action-remove]").on("click",F),b.dom("["+c+"-action-push]").on("click",E)},J=function(){I(),a.restore(),a.setDefaults(),a.registerDependencies(),a.updateDependencies()};return b.ready(J),a});